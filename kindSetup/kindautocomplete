# for auto completion and alias
apt update && apt install bash-completion
echo 'alias k=kubectl' >> ~/.bashrc
echo 'source <(kubectl completion bash)' >> ~/.bashrc
echo '# Use bash-completion, if available
[[ $PS1 && -f /usr/share/bash-completion/bash_completion ]] && \
    . /usr/share/bash-completion/bash_completion' >> ~/.bashrc
echo 'complete -o default -F __start_kubectl k' >>~/.bashrc



# crt
kubectl create secret tls selfsigned-cert --key ../nginx/certs/selfsigned.key --cert ../nginx/certs/selfsigned.crt -n url-shortener

# testing end point from client 
wget -qO- --header="Content-Type: application/json" --post-data='{"url":"https://www.facebook.com"}' http://url-api:8001/url
# shold respond with shortID as per api setup 

## apply cluster 
# then apply ingress-nginx
# kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml
# then apply deployment 
# apply keys 
# forward ingress-nginx
